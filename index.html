<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="IELTS Reading Practice - Road to 9.0">
    <title>IELTS Reading - Road to 9.0</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/practice.css">
    <link rel="stylesheet" href="css/vocabulary.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">üéØ IELTS Reading - Road to 9.0</h1>
                <nav class="nav-tabs">
                    <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
                    <button class="tab-btn" data-tab="practice">Luy·ªán t·∫≠p</button>
                    <button class="tab-btn" data-tab="vocabulary">T·ª´ v·ª±ng</button>
                    <button class="tab-btn" data-tab="errors">L·ªói sai</button>
                    <button class="tab-btn" data-tab="upload">Upload</button>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Dashboard Tab -->
        <section id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <!-- Progress Card -->
                <div class="card">
                    <h3 class="card-title">üìä Ti·∫øn ƒë·ªô h·ªçc t·∫≠p</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="overallProgress" data-progress="45">
                            <span>45%</span>
                        </div>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="completedTests">0</div>
                            <div class="stat-label">B√†i ƒë√£ ho√†n th√†nh</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="averageScore">0.0</div>
                            <div class="stat-label">ƒêi·ªÉm trung b√¨nh</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalTime">0h</div>
                            <div class="stat-label">Th·ªùi gian luy·ªán</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="vocabCount">0</div>
                            <div class="stat-label">T·ª´ v·ª±ng ƒë√£ h·ªçc</div>
                        </div>
                    </div>
                </div>

                <!-- AI Analysis Card - NEW -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 class="card-title" style="margin: 0;">ü§ñ Ph√¢n t√≠ch AI</h3>
                        <button class="btn btn-sm btn-primary" onclick="Dashboard.generateAIAnalysis()" id="aiAnalysisBtn">
                            ‚ú® Ph√¢n t√≠ch ngay
                        </button>
                    </div>
                    <div id="aiAnalysisContent">
                        <p class="empty-state">Nh·∫•n "Ph√¢n t√≠ch ngay" ƒë·ªÉ AI ƒë√°nh gi√° nƒÉng l·ª±c v√† ƒë·ªÅ xu·∫•t l·ªô tr√¨nh c·∫£i thi·ªán cho b·∫°n.</p>
                    </div>
                </div>

                <!-- Goal Card -->
                <div class="card">
                    <h3 class="card-title">üéØ M·ª•c ti√™u hi·ªán t·∫°i</h3>
                    <div class="goal-info">
                        <p class="goal-target">Target: <strong>Band 8.0</strong></p>
                        <p class="goal-description">Ti·∫øn ƒë·ªô ƒë·∫°t m·ª•c ti√™u:</p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="goalProgress" data-progress="62">
                                <span>62%</span>
                            </div>
                        </div>
                        <p class="goal-remaining">C√≤n <span id="remainingTests">15</span> b√†i n·ªØa ƒë·ªÉ ƒë·∫°t m·ª•c ti√™u!</p>
                    </div>
                </div>

                <!-- Weakness Analysis Card -->
                <div class="card">
                    <h3 class="card-title">üìà D·∫°ng b√†i c·∫ßn c·∫£i thi·ªán</h3>
                    <div class="weakness-list">
                        <div class="weakness-item">
                            <div class="weakness-header">
                                <span class="weakness-name">Matching Headings</span>
                                <span class="weakness-percent">55%</span>
                            </div>
                            <div class="progress-bar small">
                                <div class="progress-fill" style="width: 55%;"></div>
                            </div>
                        </div>
                        <div class="weakness-item">
                            <div class="weakness-header">
                                <span class="weakness-name">True/False/Not Given</span>
                                <span class="weakness-percent">68%</span>
                            </div>
                            <div class="progress-bar small">
                                <div class="progress-fill" style="width: 68%;"></div>
                            </div>
                        </div>
                        <div class="weakness-item">
                            <div class="weakness-header">
                                <span class="weakness-name">Summary Completion</span>
                                <span class="weakness-percent">72%</span>
                            </div>
                            <div class="progress-bar small">
                                <div class="progress-fill" style="width: 72%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <h3 class="card-title">üìÖ Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
                    <div class="activity-list" id="recentActivity">
                        <p class="empty-state">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Practice Tab -->
        <section id="practice" class="tab-content">
            <!-- Test Selector Section -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 class="card-title" style="margin: 0;">üìö Ch·ªçn ƒë·ªÅ thi ƒë·ªÉ luy·ªán t·∫≠p</h3>
                    <button class="btn btn-sm btn-primary" onclick="App.switchTab('upload')">
                        ‚ûï Upload ƒë·ªÅ m·ªõi
                    </button>
                </div>
                <p style="color: #666; margin-bottom: 15px; font-size: 14px;">
                    üí° <strong>Tip:</strong> Click v√†o ƒë·ªÅ thi ƒë·ªÉ ch·ªçn, sau ƒë√≥ ch·ªçn "Full Test" ho·∫∑c d·∫°ng b√†i c·ª• th·ªÉ.
                </p>
                <div class="test-selector-grid" id="testSelectorGrid">
                    <p class="empty-state">ƒêang t·∫£i danh s√°ch ƒë·ªÅ thi...</p>
                </div>
            </div>

            <!-- Level & Question Type Selection (Hidden until test selected) -->
            <div id="testConfigSection" style="display: none;">
                <div class="card">
                    <h3 class="card-title">üéØ Ch·ªçn m·ª©c ƒë·ªô kh√≥ (T√πy ch·ªçn)</h3>
                    <div class="level-selector" id="levelSelector">
                        <button class="level-btn active" data-level="5.0">Band 5.0</button>
                        <button class="level-btn" data-level="6.0">Band 6.0</button>
                        <button class="level-btn" data-level="6.5">Band 6.5</button>
                        <button class="level-btn" data-level="7.0">Band 7.0</button>
                        <button class="level-btn" data-level="7.5">Band 7.5</button>
                        <button class="level-btn" data-level="8.0">Band 8.0</button>
                        <button class="level-btn" data-level="8.5">Band 8.5</button>
                        <button class="level-btn" data-level="9.0">Band 9.0</button>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìù Ch·ªçn c√°ch luy·ªán t·∫≠p</h3>
                    <p style="color: #666; margin-bottom: 15px; font-size: 14px;">
                        Ch·ªçn <strong>Full Test</strong> ƒë·ªÉ l√†m t·∫•t c·∫£ c√¢u h·ªèi, ho·∫∑c ch·ªçn d·∫°ng b√†i c·ª• th·ªÉ ƒë·ªÉ luy·ªán t·∫≠p ri√™ng.
                    </p>
                    <div class="question-types-grid" id="questionTypesGrid">
                        <div class="question-type-card" data-type="full-test">
                            <div class="question-icon">üìã</div>
                            <h4>Full Test</h4>
                            <p>L√†m t·∫•t c·∫£ c√¢u h·ªèi trong ƒë·ªÅ</p>
                        </div>
                        <div class="question-type-card" data-type="multiple-choice">
                            <div class="question-icon">üìù</div>
                            <h4>Multiple Choice</h4>
                            <p>C√¢u h·ªèi tr·∫Øc nghi·ªám</p>
                        </div>
                        <div class="question-type-card" data-type="tfng">
                            <div class="question-icon">‚úì‚úó</div>
                            <h4>True/False/Not Given</h4>
                            <p>ƒê√∫ng/Sai/Kh√¥ng c√≥</p>
                        </div>
                        <div class="question-type-card" data-type="matching-headings">
                            <div class="question-icon">üìë</div>
                            <h4>Matching Headings</h4>
                            <p>Gh√©p ti√™u ƒë·ªÅ ƒëo·∫°n vƒÉn</p>
                        </div>
                        <div class="question-type-card" data-type="summary">
                            <div class="question-icon">üìã</div>
                            <h4>Summary Completion</h4>
                            <p>Ho√†n th√†nh t√≥m t·∫Øt</p>
                        </div>
                        <div class="question-type-card" data-type="sentence">
                            <div class="question-icon">‚úçÔ∏è</div>
                            <h4>Sentence Completion</h4>
                            <p>Ho√†n th√†nh c√¢u</p>
                        </div>
                        <div class="question-type-card" data-type="ynng">
                            <div class="question-icon">‚ùì</div>
                            <h4>Yes/No/Not Given</h4>
                            <p>C√≥/Kh√¥ng/Kh√¥ng c√≥</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timer Section -->
            <div class="timer-section card" id="timerSection" style="display: none;">
                <h3 class="card-title">‚è±Ô∏è B·ªô ƒë·∫øm th·ªùi gian</h3>
                <div class="timer-display" id="timerDisplay">60:00</div>
                <div class="timer-controls">
                    <button class="btn btn-success" id="startTimer">B·∫Øt ƒë·∫ßu</button>
                    <button class="btn btn-warning" id="pauseTimer">T·∫°m d·ª´ng</button>
                    <button class="btn btn-primary" id="resetTimer">Reset</button>
                </div>
                <p style="margin-top: 10px; font-size: 13px; color: #666; text-align: center;">
                    üí° Timer s·∫Ω t·ª± ƒë·ªông b·∫Øt ƒë·∫ßu khi b·∫°n ch·ªçn d·∫°ng b√†i
                </p>
            </div>

            <!-- Passage Container -->
            <div class="passage-container" id="passageContainer" style="display: none;">
                <div class="passage-panel">
                    <div class="passage-header">
                        <h3>Passage <span id="passageNumber">1</span></h3>
                        <div class="highlight-controls">
                            <span style="font-size: 12px; color: #666; margin-right: 10px;">Highlight:</span>
                            <button class="btn btn-sm highlight-btn active" data-color="yellow" title="Yellow highlight (V√†ng)">
                                üü®
                            </button>
                            <button class="btn btn-sm highlight-btn" data-color="green" title="Green highlight (Xanh)">
                                üü©
                            </button>
                            <button class="btn btn-sm highlight-btn" data-color="blue" title="Blue highlight (Xanh d∆∞∆°ng)">
                                üü¶
                            </button>
                            <button class="btn btn-sm highlight-btn" data-color="pink" title="Pink highlight (H·ªìng)">
                                üü™
                            </button>
                            <button class="btn btn-sm" id="clearHighlights" title="Clear all highlights">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div style="padding: 10px 20px; background: #f0f4ff; border-bottom: 1px solid #e0e7ff; font-size: 12px; color: #667eea;">
                        üí° <strong>C√°ch highlight:</strong> Ch·ªçn m√†u ‚Üí Drag chu·ªôt ch·ªçn text ‚Üí Double-click ƒë·ªÉ x√≥a
                    </div>
                    <div class="passage-content" id="passageContent">
                        <!-- Content will be loaded dynamically -->
                    </div>
                </div>
                
                <div class="questions-panel">
                    <div class="questions-header">
                        <h3>Questions</h3>
                        <span class="question-count" id="questionCount">0/0</span>
                    </div>
                    <div class="questions-content" id="questionsContent">
                        <!-- Questions will be loaded dynamically -->
                    </div>
                    <button class="btn btn-primary btn-large" id="submitAnswers">N·ªôp b√†i</button>
                </div>
            </div>
        </section>

        <!-- Vocabulary Tab -->
        <section id="vocabulary" class="tab-content">
            <div class="card">
                <h3 class="card-title">üìö Kho t·ª´ v·ª±ng c·ªßa b·∫°n</h3>
                <div class="vocab-controls">
                    <input type="text" id="newWord" class="vocab-input" placeholder="T·ª´ m·ªõi..." required>
                    <input type="text" id="newMeaning" class="vocab-input" placeholder="Nghƒ©a..." required>
                    <input type="text" id="newExample" class="vocab-input" placeholder="V√≠ d·ª• (t√πy ch·ªçn)...">
                    <button class="btn btn-primary" id="addVocabBtn">‚ûï Th√™m t·ª´</button>
                </div>
            </div>

            <!-- Search and Filter -->
            <div class="card">
                <div class="vocab-search">
                    <input type="text" id="searchVocab" class="vocab-input" placeholder="üîç T√¨m ki·∫øm t·ª´ v·ª±ng...">
                    <select id="sortVocab" class="vocab-select">
                        <option value="newest">M·ªõi nh·∫•t</option>
                        <option value="oldest">C≈© nh·∫•t</option>
                        <option value="alphabetical">A-Z</option>
                    </select>
                </div>
            </div>

            <!-- Vocabulary List -->
            <div class="vocab-list-container">
                <div class="vocab-list" id="vocabList">
                    <p class="empty-state">Ch∆∞a c√≥ t·ª´ v·ª±ng n√†o. H√£y th√™m t·ª´ m·ªõi!</p>
                </div>
            </div>
        </section>

        <!-- Errors Tab -->
        <section id="errors" class="tab-content">
            <div class="card">
                <div class="error-header-section">
                    <h3 class="card-title">‚ùå Nh·∫≠t k√Ω l·ªói sai</h3>
                    <button class="btn btn-sm btn-danger" id="clearErrors">üóëÔ∏è X√≥a t·∫•t c·∫£</button>
                </div>
                <div class="error-stats">
                    <div class="error-stat-item">
                        <span class="error-stat-value" id="totalErrors">0</span>
                        <span class="error-stat-label">T·ªïng l·ªói</span>
                    </div>
                    <div class="error-stat-item">
                        <span class="error-stat-value" id="mostCommonError">-</span>
                        <span class="error-stat-label">L·ªói th∆∞·ªùng g·∫∑p</span>
                    </div>
                </div>
            </div>

            <div class="error-log" id="errorLog">
                <p class="empty-state">Ch∆∞a c√≥ l·ªói n√†o ƒë∆∞·ª£c ghi nh·∫≠n</p>
            </div>
        </section>

        <!-- Upload Tab -->
        <section id="upload" class="tab-content">
            <!-- Upload Area -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 class="card-title" style="margin: 0;">üì§ Upload ƒë·ªÅ thi m·ªõi</h3>
                    <button class="btn btn-sm btn-primary" onclick="App.showExampleFormat()">
                        üìù Xem m·∫´u file
                    </button>
                </div>
                <p style="color: #666; margin-bottom: 15px;">
                    Upload file JSON ho·∫∑c TXT ƒë·ªÉ t·ª± ƒë·ªông t·∫°o ƒë·ªÅ thi. H·ªá th·ªëng s·∫Ω parse v√† generate ƒë·ªÅ t·ª± ƒë·ªông.
                </p>
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÑ</div>
                    <p class="upload-text">K√©o th·∫£ file ho·∫∑c click ƒë·ªÉ ch·ªçn</p>
                    <p class="upload-subtext">H·ªó tr·ª£: JSON, TXT (Max 10MB)</p>
                    <input type="file" id="fileInput" class="file-input" accept=".json,.txt" multiple>
                </div>
            </div>

            <!-- My Tests Library -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 class="card-title" style="margin: 0;">üìö Th∆∞ vi·ªán ƒë·ªÅ thi c·ªßa t√¥i</h3>
                    <button class="btn btn-sm btn-danger" onclick="App.clearAllTests()" id="clearAllTestsBtn">
                        üóëÔ∏è X√≥a t·∫•t c·∫£
                    </button>
                </div>
                <div id="testLibrary" class="test-library">
                    <p class="empty-state">Ch∆∞a c√≥ ƒë·ªÅ thi n√†o. H√£y upload file ƒë·ªÉ b·∫Øt ƒë·∫ßu!</p>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">üíæ Sao l∆∞u d·ªØ li·ªáu</h3>
                <p class="backup-description">D·ªØ li·ªáu c·ªßa b·∫°n ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u sau m·ªói thay ƒë·ªïi.</p>
                <div class="backup-controls">
                    <button class="btn btn-primary" id="exportDataBtn">üì• Xu·∫•t d·ªØ li·ªáu</button>
                    <button class="btn btn-success" id="importDataBtn">üì§ Nh·∫≠p d·ªØ li·ªáu</button>
                    <input type="file" id="importFile" style="display: none;" accept=".json">
                </div>
                <div class="backup-info">
                    <p>L·∫ßn sao l∆∞u cu·ªëi: <strong id="lastBackup">Ch∆∞a c√≥</strong></p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2024 IELTS Reading Practice. Made with ‚ù§Ô∏è for learners.</p>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="js/app.js"></script>
    <script src="js/config.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/error-tracker.js"></script>
    <script src="js/file_parser.js"></script>
    <script src="js/practice.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/vocabulary.js"></script>
</body>
</html>