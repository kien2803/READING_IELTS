<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="IELTS Reading Practice - Road to 9.0 | Luy·ªán thi IELTS Reading"
    />
    <title>IELTS Reading - Road to 9.0</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- DOMPurify for XSS Protection -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/sidebar.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <link rel="stylesheet" href="css/dashboard-charts.css" />
    <link rel="stylesheet" href="css/practice.css" />
    <link rel="stylesheet" href="css/vocabulary.css" />
    <link rel="stylesheet" href="css/fullscreen.css" />
    <link rel="stylesheet" href="css/ai-generator.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar Navigation -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="logo-container">
            <div class="logo-icon"><i class="ph-fill ph-read-cv-logo"></i></div>
            <div class="logo-text">
              <h1>IELTS Reading</h1>
              <span class="logo-subtitle">Road to 9.0</span>
            </div>
          </div>
          <button
            class="sidebar-toggle"
            id="sidebarToggle"
            title="Toggle Sidebar"
          >
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>

        <nav class="sidebar-nav">
          <div class="nav-section">
            <span class="nav-section-title">Main</span>
            <button class="nav-item active" data-tab="dashboard">
              <span class="nav-icon"><i class="ph ph-squares-four"></i></span>
              <span class="nav-label">Dashboard</span>
            </button>
            <button class="nav-item" data-tab="practice">
              <span class="nav-icon"><i class="ph ph-pencil-circle"></i></span>
              <span class="nav-label">Luy·ªán t·∫≠p</span>
            </button>
            <button class="nav-item" data-tab="library">
              <span class="nav-icon"><i class="ph ph-books"></i></span>
              <span class="nav-label">Th∆∞ vi·ªán ƒë·ªÅ</span>
            </button>
          </div>

          <div class="nav-section">
            <span class="nav-section-title">Practice Modes</span>
            <button class="nav-item" data-tab="minitest">
              <span class="nav-icon"><i class="ph ph-timer"></i></span>
              <span class="nav-label">Mini-Test</span>
              <span class="nav-badge">New</span>
            </button>
            <button class="nav-item" data-tab="drill">
              <span class="nav-icon"><i class="ph ph-lightning"></i></span>
              <span class="nav-label">Drill Mode</span>
              <span class="nav-badge">New</span>
            </button>
          </div>

          <div class="nav-section">
            <span class="nav-section-title">Learning</span>
            <button class="nav-item" data-tab="vocabulary">
              <span class="nav-icon"><i class="ph ph-book-bookmark"></i></span>
              <span class="nav-label">T·ª´ v·ª±ng</span>
            </button>
            <button class="nav-item" data-tab="errors">
              <span class="nav-icon"><i class="ph ph-warning-circle"></i></span>
              <span class="nav-label">L·ªói sai</span>
            </button>
            <button class="nav-item" data-tab="aianalysis">
              <span class="nav-icon"><i class="ph ph-robot"></i></span>
              <span class="nav-label">AI Ph√¢n t√≠ch</span>
              <span class="nav-badge hot">Hot</span>
            </button>
          </div>

          <div class="nav-section">
            <span class="nav-section-title">Settings</span>
            <button class="nav-item" data-tab="upload">
              <span class="nav-icon"><i class="ph ph-upload-simple"></i></span>
              <span class="nav-label">Upload/T·∫°o ƒë·ªÅ</span>
            </button>
            <button class="nav-item" data-tab="settings">
              <span class="nav-icon"><i class="ph ph-gear"></i></span>
              <span class="nav-label">C√†i ƒë·∫∑t</span>
            </button>
          </div>
        </nav>

        <div class="sidebar-footer">
          <div class="user-progress">
            <div class="progress-circle" id="sidebarProgress">
              <svg viewBox="0 0 36 36">
                <path
                  class="circle-bg"
                  d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                />
                <path
                  class="circle-progress"
                  stroke-dasharray="45, 100"
                  d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                />
              </svg>
              <span class="progress-text">45%</span>
            </div>
            <div class="user-info">
              <span class="user-level">Band hi·ªán t·∫°i</span>
              <span class="user-band" id="currentBandSidebar">6.5</span>
            </div>
          </div>
          <div class="streak-info">
            <span class="streak-icon"><i class="ph-fill ph-fire"></i></span>
            <span class="streak-count" id="streakCount">0</span>
            <span class="streak-label">ng√†y li√™n t·ª•c</span>
          </div>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
          <div class="topbar-left">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
              <span></span><span></span><span></span>
            </button>
            <div class="breadcrumb">
              <span id="currentSection">Dashboard</span>
            </div>
          </div>
          <div class="topbar-right">
            <div class="quick-stats">
              <div class="quick-stat">
                <span class="stat-icon"><i class="ph ph-file-text"></i></span>
                <span class="stat-value" id="topbarTests">0</span>
              </div>
              <div class="quick-stat">
                <span class="stat-icon"><i class="ph ph-clock"></i></span>
                <span class="stat-value" id="topbarTime">0h</span>
              </div>
            </div>
            <button
              class="btn btn-primary btn-quick-practice"
              onclick="App.startQuickPractice()"
            >
              <i class="ph ph-lightning"></i> Luy·ªán t·∫≠p nhanh
            </button>
          </div>
        </header>

        <!-- Content Container -->
        <div class="content-wrapper">
          <!-- Dashboard Tab -->
          <section id="dashboard" class="tab-content active">
            <div class="section-header">
              <h2><i class="ph ph-chart-bar"></i> T·ªïng quan ti·∫øn ƒë·ªô</h2>
              <p class="section-subtitle">
                Theo d√µi h√†nh tr√¨nh chinh ph·ª•c IELTS Reading c·ªßa b·∫°n
              </p>
            </div>

            <div class="dashboard-grid">
              <!-- Main Stats Cards -->
              <div class="stats-row">
                <div class="stat-card gradient-primary">
                  <div class="stat-card-icon"><i class="ph ph-clipboard-text"></i></div>
                  <div class="stat-card-content">
                    <span class="stat-card-value" id="completedTests">0</span>
                    <span class="stat-card-label">B√†i ƒë√£ ho√†n th√†nh</span>
                  </div>
                </div>
                <div class="stat-card gradient-success">
                  <div class="stat-card-icon"><i class="ph ph-target"></i></div>
                  <div class="stat-card-content">
                    <span class="stat-card-value" id="averageScore">0.0</span>
                    <span class="stat-card-label">Band trung b√¨nh</span>
                  </div>
                </div>
                <div class="stat-card gradient-info">
                  <div class="stat-card-icon"><i class="ph ph-clock"></i></div>
                  <div class="stat-card-content">
                    <span class="stat-card-value" id="totalTime">0h</span>
                    <span class="stat-card-label">Th·ªùi gian luy·ªán</span>
                  </div>
                </div>
                <div class="stat-card gradient-warning">
                  <div class="stat-card-icon"><i class="ph ph-book-bookmark"></i></div>
                  <div class="stat-card-content">
                    <span class="stat-card-value" id="vocabCount">0</span>
                    <span class="stat-card-label">T·ª´ v·ª±ng ƒë√£ h·ªçc</span>
                  </div>
                </div>
              </div>

              <!-- Progress Section -->
              <div class="card-row">
                <div class="card full-width">
                  <div class="card-header">
                    <h3><i class="ph ph-trend-up"></i> Ti·∫øn ƒë·ªô h·ªçc t·∫≠p</h3>
                    <span class="target-badge"
                      >Target: Band
                      <strong id="targetBandDisplay">8.0</strong></span
                    >
                  </div>
                  <div class="progress-section">
                    <div class="progress-bar large">
                      <div
                        class="progress-fill"
                        id="overallProgress"
                        style="width: 45%"
                      >
                        <span>45%</span>
                      </div>
                    </div>
                    <div class="progress-milestones">
                      <span class="milestone" style="left: 25%">Band 6</span>
                      <span class="milestone" style="left: 50%">Band 7</span>
                      <span class="milestone" style="left: 75%">Band 8</span>
                      <span class="milestone" style="left: 100%">Band 9</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Two Column Layout -->
              <div class="card-row two-col">
                <!-- Weakness Analysis -->
                <div class="card">
                  <div class="card-header">
                    <h3><i class="ph ph-warning-octagon"></i> D·∫°ng b√†i c·∫ßn c·∫£i thi·ªán</h3>
                    <button
                      class="btn btn-sm btn-ghost"
                      onclick="Dashboard.refreshWeaknesses()"
                    >
                      <i class="ph ph-arrow-clockwise"></i>
                    </button>
                  </div>
                  <div class="weakness-list" id="weaknessList">
                    <p class="empty-state">
                      Ho√†n th√†nh th√™m b√†i test ƒë·ªÉ ph√¢n t√≠ch
                    </p>
                  </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                  <div class="card-header">
                    <h3><i class="ph ph-calendar"></i> Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
                  </div>
                  <div class="activity-list" id="recentActivity">
                    <p class="empty-state">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                  </div>
                </div>
              </div>

              <!-- Charts Section -->
              <div class="charts-section">
                <div class="section-header">
                  <h2><i class="ph ph-chart-pie-slice"></i> Bi·ªÉu ƒë·ªì ph√¢n t√≠ch</h2>
                  <button class="btn btn-sm btn-ghost" onclick="DashboardCharts.refresh()"><i class="ph ph-arrow-clockwise"></i> L√†m m·ªõi</button>
                </div>
                  
                  <div class="charts-grid">
                      <!-- Line Chart - Progress Over Time -->
                      <div class="chart-container">
                          <h3><i class="ph ph-trend-up"></i> Ti·∫øn ƒë·ªô theo th·ªùi gian</h3>
                          <canvas id="lineChart"></canvas>
                      </div>

                      <!-- Radar Chart - Skills Analysis -->
                      <div class="chart-container">
                          <h3><i class="ph ph-target"></i> Ph√¢n t√≠ch k·ªπ nƒÉng</h3>
                          <canvas id="radarChart"></canvas>
                      </div>
                  </div>

                  <div class="charts-grid">
                      <!-- Bar Chart - Band Distribution -->
                      <div class="chart-container">
                          <h3><i class="ph ph-chart-bar"></i> Ph√¢n b·ªë Band Score</h3>
                          <canvas id="barChart"></canvas>
                      </div>

                      <!-- Pie Chart - Question Type Accuracy -->
                      <div class="chart-container">
                          <h3><i class="ph ph-check-circle"></i> ƒê·ªô ch√≠nh x√°c theo d·∫°ng c√¢u h·ªèi</h3>
                          <canvas id="pieChart"></canvas>
                      </div>
                  </div>

                  <!-- Performance Table -->
                  <div class="chart-container full-width">
                      <h3><i class="ph ph-table"></i> K·∫øt qu·∫£ g·∫ßn ƒë√¢y</h3>
                      <div id="tableChart">
                          <p class="empty-state">Ch∆∞a c√≥ d·ªØ li·ªáu</p>
                      </div>
                  </div>
              </div>

              <!-- Quick Actions -->
              <div class="card-row">
                <div class="card full-width">
                  <div class="card-header">
                    <h3>üöÄ B·∫Øt ƒë·∫ßu h·ªçc ngay</h3>
                  </div>
                  <div class="quick-actions-grid">
                    <button
                      class="quick-action-card"
                      onclick="App.switchTab('practice')"
                    >
                      <span class="action-icon"><i class="ph ph-pencil-circle"></i></span>
                      <span class="action-title">Full Test</span>
                      <span class="action-desc">Luy·ªán ƒë·ªÅ ho√†n ch·ªânh</span>
                    </button>
                    <button
                      class="quick-action-card"
                      onclick="App.switchTab('minitest')"
                    >
                      <span class="action-icon"><i class="ph ph-timer"></i></span>
                      <span class="action-title">Mini-Test</span>
                      <span class="action-desc">13 c√¢u / 15 ph√∫t</span>
                    </button>
                    <button
                      class="quick-action-card"
                      onclick="App.switchTab('drill')"
                    >
                      <span class="action-icon"><i class="ph ph-lightning"></i></span>
                      <span class="action-title">Drill</span>
                      <span class="action-desc">Luy·ªán d·∫°ng b√†i y·∫øu</span>
                    </button>
                    <button
                      class="quick-action-card"
                      onclick="App.switchTab('aianalysis')"
                    >
                      <span class="action-icon"><i class="ph ph-robot"></i></span>
                      <span class="action-title">AI Analysis</span>
                      <span class="action-desc">Ph√¢n t√≠ch ƒëi·ªÉm y·∫øu</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Practice Tab -->
          <section id="practice" class="tab-content">
            <div class="section-header">
              <h2><i class="ph ph-pencil-circle"></i> Luy·ªán t·∫≠p</h2>
              <p class="section-subtitle">Ch·ªçn ƒë·ªÅ thi v√† b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p</p>
            </div>

            <!-- Test Selector -->
            <div class="card">
              <div class="card-header">
                <h3>üìö Ch·ªçn ƒë·ªÅ thi</h3>
                <div class="header-actions">
                  <select id="testSourceFilter" class="select-sm">
                    <option value="all">T·∫•t c·∫£ ngu·ªìn</option>
                    <option value="cambridge">Cambridge</option>
                    <option value="british-council">British Council</option>
                    <option value="ielts-official">IELTS Official</option>
                    <option value="custom">ƒê·ªÅ t·ª± t·∫°o</option>
                  </select>
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="App.switchTab('upload')"
                  >
                    <i class="ph ph-plus"></i> T·∫°o ƒë·ªÅ m·ªõi
                  </button>
                </div>
              </div>
              <p class="hint-text">
                <i class="ph ph-lightbulb"></i> Click v√†o ƒë·ªÅ thi ƒë·ªÉ ch·ªçn, sau ƒë√≥ ch·ªçn "Full Test" ho·∫∑c d·∫°ng
                b√†i c·ª• th·ªÉ
              </p>
              <div class="test-selector-grid" id="testSelectorGrid">
                <p class="empty-state">ƒêang t·∫£i danh s√°ch ƒë·ªÅ thi...</p>
              </div>
            </div>

            <!-- Practice Options (Hidden until test selected) -->
            <div id="testConfigSection" style="display: none">
              <!-- Question Types Available in Selected Test -->
              <div class="card">
                <div class="card-header">
                  <h3><i class="ph ph-list-checks"></i> C√°c d·∫°ng c√¢u h·ªèi c√≥ trong ƒë·ªÅ</h3>
                  <span class="selected-test-name" id="selectedTestName"
                    >-</span
                  >
                </div>
                <p class="hint-text">
                  <i class="ph ph-lightbulb"></i> Ch·ªâ hi·ªÉn th·ªã nh·ªØng d·∫°ng b√†i c√≥ trong ƒë·ªÅ ƒë√£ ch·ªçn
                </p>
                <div class="question-types-grid" id="questionTypesGrid">
                  <!-- Will be populated dynamically -->
                </div>
              </div>

              <!-- Timer Settings -->
              <div class="card timer-config-card">
                <div class="card-header">
                  <h3><i class="ph ph-timer"></i> C√†i ƒë·∫∑t th·ªùi gian</h3>
                </div>
                <div class="timer-options">
                  <label class="timer-option">
                    <input
                      type="radio"
                      name="timerMode"
                      value="standard"
                      checked
                    />
                    <span class="option-content">
                      <span class="option-title"><i class="ph ph-clipboard-text"></i> Chu·∫©n (60 ph√∫t)</span>
                      <span class="option-desc">Nh∆∞ trong k·ª≥ thi th·∫≠t</span>
                    </span>
                  </label>
                  <label class="timer-option">
                    <input type="radio" name="timerMode" value="relaxed" />
                    <span class="option-content">
                      <span class="option-title"><i class="ph ph-coffee"></i> Tho·∫£i m√°i (90 ph√∫t)</span>
                      <span class="option-desc"
                        >Th√™m th·ªùi gian ƒë·ªÉ l√†m quen</span
                      >
                    </span>
                  </label>
                  <label class="timer-option">
                    <input type="radio" name="timerMode" value="unlimited" />
                    <span class="option-content">
                      <span class="option-title"><i class="ph ph-infinity"></i> Kh√¥ng gi·ªõi h·∫°n</span>
                      <span class="option-desc">Luy·ªán kh√¥ng c√≥ √°p l·ª±c</span>
                    </span>
                  </label>
                </div>
              </div>

              <!-- Start Button -->
              <div class="start-practice-section">
                <button
                  class="btn btn-primary btn-large btn-start"
                  id="startPracticeBtn"
                  onclick="Practice.startSelectedTest()"
                >
                  <i class="ph ph-rocket-launch"></i> B·∫Øt ƒë·∫ßu luy·ªán t·∫≠p
                </button>
                <button
                  class="btn btn-success btn-large btn-start"
                  onclick="Practice.startFullscreen()"
                >
                  <i class="ph ph-desktop"></i> Ch·∫ø ƒë·ªô Full Screen (Nh∆∞ thi th·∫≠t)
                </button>
              </div>
            </div>

            <!-- Practice Area (Hidden initially) -->
            <div id="practiceArea" style="display: none">
              <div class="timer-section card" id="timerSection">
                <div class="timer-display-wrapper">
                  <div class="timer-display" id="timerDisplay">60:00</div>
                  <div class="timer-controls">
                    <button class="btn btn-success" id="startTimer"><i class="ph ph-play"></i></button>
                    <button class="btn btn-warning" id="pauseTimer"><i class="ph ph-pause"></i></button>
                    <button class="btn btn-primary" id="resetTimer"><i class="ph ph-arrow-counter-clockwise"></i></button>
                  </div>
                </div>
              </div>

              <div class="passage-container" id="passageContainer">
                <div class="passage-panel">
                  <div class="passage-header">
                    <h3>Passage <span id="passageNumber">1</span></h3>
                    <div class="highlight-controls">
                      <span class="highlight-label">Highlight:</span>
                      <button
                        class="btn btn-sm highlight-btn active"
                        data-color="yellow"
                        title="Yellow"
                      >
                        <div style="width: 12px; height: 12px; background: #ffff00;border-radius:2px;"></div>
                      </button>
                      <button
                        class="btn btn-sm highlight-btn"
                        data-color="green"
                        title="Green"
                      >
                        <div style="width: 12px; height: 12px; background: #00ff00;border-radius:2px;"></div>
                      </button>
                      <button
                        class="btn btn-sm highlight-btn"
                        data-color="blue"
                        title="Blue"
                      >
                        <div style="width: 12px; height: 12px; background: #0000ff;border-radius:2px;"></div>
                      </button>
                      <button
                        class="btn btn-sm highlight-btn"
                        data-color="pink"
                        title="Pink"
                      >
                        <div style="width: 12px; height: 12px; background: #FFC0CB;border-radius:2px;"></div>
                      </button>
                      <button
                        class="btn btn-sm"
                        id="clearHighlights"
                        title="Clear"
                      >
                        <i class="ph ph-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="highlight-tip">
                    <i class="ph ph-lightbulb"></i> <strong>Tip:</strong> Ch·ªçn m√†u ‚Üí Drag chu·ªôt ch·ªçn text ‚Üí
                    Double-click ƒë·ªÉ x√≥a highlight
                  </div>
                  <div class="passage-content" id="passageContent">
                    <!-- Content loaded dynamically -->
                  </div>
                </div>

                <div class="questions-panel">
                  <div class="questions-header">
                    <h3>Questions</h3>
                    <span class="question-count" id="questionCount">0/0</span>
                  </div>
                  <div class="questions-content" id="questionsContent">
                    <!-- Questions loaded dynamically -->
                  </div>
                  <button class="btn btn-primary btn-large" id="submitAnswers">
                    <i class="ph ph-paper-plane-right"></i> N·ªôp b√†i
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Library Tab -->
          <section id="library" class="tab-content">
            <div class="section-header">
              <h2>üìö Th∆∞ vi·ªán ƒë·ªÅ thi</h2>
              <p class="section-subtitle">T·∫•t c·∫£ ƒë·ªÅ thi t·ª´ c√°c ngu·ªìn uy t√≠n</p>
            </div>

            <!-- Source Tabs -->
            <div class="source-tabs">
              <button class="source-tab active" data-source="all">
                T·∫•t c·∫£
              </button>
              <button class="source-tab" data-source="cambridge">
                <span class="source-logo"><i class="ph ph-buildings"></i></span> Cambridge
              </button>
              <button class="source-tab" data-source="british-council">
                <span class="source-logo"><i class="ph ph-globe-hemisphere-east"></i></span> British Council
              </button>
              <button class="source-tab" data-source="ielts-official">
                <span class="source-logo"><i class="ph ph-book-bookmark"></i></span> IELTS Official
              </button>
              <button class="source-tab" data-source="custom">
                <span class="source-logo"><i class="ph ph-magic-wand"></i></span> ƒê·ªÅ t·ª± t·∫°o
              </button>
            </div>

            <!-- Library Grid -->
            <div class="library-grid" id="libraryGrid">
              <!-- Populated dynamically -->
            </div>
          </section>

          <!-- Mini-Test Tab -->
          <section id="minitest" class="tab-content">
            <div class="section-header">
              <h2><i class="ph ph-timer"></i> Mini-Test</h2>
              <p class="section-subtitle">
                Luy·ªán t·∫≠p nhanh v·ªõi 13 c√¢u h·ªèi trong 15 ph√∫t
              </p>
            </div>

            <div class="minitest-options">
              <div class="card">
                <div class="card-header">
                  <h3><i class="ph ph-target"></i> Ch·ªçn ch·∫ø ƒë·ªô Mini-Test</h3>
                </div>
                <div class="minitest-modes-grid">
                  <button
                    class="minitest-mode-card"
                    onclick="MiniTest.start('random')"
                  >
                    <span class="mode-icon"><i class="ph ph-shuffle"></i></span>
                    <span class="mode-title">Random Mix</span>
                    <span class="mode-desc"
                      >13 c√¢u ng·∫´u nhi√™n t·ª´ nhi·ªÅu d·∫°ng</span
                    >
                    <span class="mode-time">15 ph√∫t</span>
                  </button>
                  <button
                    class="minitest-mode-card"
                    onclick="MiniTest.start('tfng')"
                  >
                    <span class="mode-icon"><i class="ph ph-check-circle"></i></span>
                    <span class="mode-title">T/F/NG Focus</span>
                    <span class="mode-desc"
                      >T·∫≠p trung True/False/Not Given</span
                    >
                    <span class="mode-time">15 ph√∫t</span>
                  </button>
                  <button
                    class="minitest-mode-card"
                    onclick="MiniTest.start('matching')"
                  >
                    <span class="mode-icon"><i class="ph ph-link"></i></span>
                    <span class="mode-title">Matching Focus</span>
                    <span class="mode-desc">Matching Headings/Info</span>
                    <span class="mode-time">15 ph√∫t</span>
                  </button>
                  <button
                    class="minitest-mode-card"
                    onclick="MiniTest.start('completion')"
                  >
                    <span class="mode-icon"><i class="ph ph-pencil-simple"></i></span>
                    <span class="mode-title">Completion Focus</span>
                    <span class="mode-desc">Summary/Sentence Completion</span>
                    <span class="mode-time">15 ph√∫t</span>
                  </button>
                </div>
              </div>

              <!-- Mini-Test History -->
              <div class="card">
                <div class="card-header">
                  <h3><i class="ph ph-chart-bar"></i> L·ªãch s·ª≠ Mini-Test</h3>
                </div>
                <div class="minitest-history" id="minitestHistory">
                  <p class="empty-state">Ch∆∞a c√≥ k·∫øt qu·∫£ Mini-Test n√†o</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Drill Tab -->
          <section id="drill" class="tab-content">
            <div class="section-header">
              <h2><i class="ph ph-lightning"></i> Drill Mode</h2>
              <p class="section-subtitle">Luy·ªán t·∫≠p chuy√™n s√¢u t·ª´ng d·∫°ng b√†i</p>
            </div>

            <div class="drill-container">
              <div class="card">
                <div class="card-header">
                  <h3><i class="ph ph-target"></i> Ch·ªçn d·∫°ng b√†i ƒë·ªÉ drill</h3>
                </div>
                <p class="hint-text">
                  <i class="ph ph-lightbulb"></i> Drill mode s·∫Ω cho b·∫°n l√†m li√™n t·ª•c nhi·ªÅu c√¢u c√πng d·∫°ng ƒë·ªÉ
                  th√†nh th·∫°o
                </p>

                <div class="drill-types-grid" id="drillTypesGrid">
                  <button class="drill-type-card" onclick="Drill.start('tfng')">
                    <div class="drill-icon"><i class="ph ph-check-circle"></i></div>
                    <div class="drill-info">
                      <h4>True/False/Not Given</h4>
                      <p>X√°c ƒë·ªãnh th√¥ng tin ƒë√∫ng/sai</p>
                      <div class="drill-stats">
                        <span class="accuracy" id="drillAccTfng">--</span>
                        <span class="total">c√¢u ƒë√£ l√†m</span>
                      </div>
                    </div>
                    <div class="difficulty-indicator">
                      <span class="dot hard"></span>
                      <span class="label">Kh√≥</span>
                    </div>
                  </button>

                  <button class="drill-type-card" onclick="Drill.start('ynng')">
                    <div class="drill-icon"><i class="ph ph-question"></i></div>
                    <div class="drill-info">
                      <h4>Yes/No/Not Given</h4>
                      <p>Quan ƒëi·ªÉm c·ªßa t√°c gi·∫£</p>
                      <div class="drill-stats">
                        <span class="accuracy" id="drillAccYnng">--</span>
                        <span class="total">c√¢u ƒë√£ l√†m</span>
                      </div>
                    </div>
                    <div class="difficulty-indicator">
                      <span class="dot hard"></span>
                      <span class="label">Kh√≥</span>
                    </div>
                  </button>

                  <button
                    class="drill-type-card"
                    onclick="Drill.start('matching-headings')"
                  >
                    <div class="drill-icon"><i class="ph ph-browsers"></i></div>
                    <div class="drill-info">
                      <h4>Matching Headings</h4>
                      <p>Gh√©p ti√™u ƒë·ªÅ ƒëo·∫°n vƒÉn</p>
                      <div class="drill-stats">
                        <span class="accuracy" id="drillAccHeadings">--</span>
                        <span class="total">c√¢u ƒë√£ l√†m</span>
                      </div>
                    </div>
                    <div class="difficulty-indicator">
                      <span class="dot medium"></span>
                      <span class="label">Trung b√¨nh</span>
                    </div>
                  </button>

                  <button
                    class="drill-type-card"
                    onclick="Drill.start('multiple-choice')"
                  >
                    <div class="drill-icon"><i class="ph ph-list-bullets"></i></div>
                    <div class="drill-info">
                      <h4>Multiple Choice</h4>
                      <p>C√¢u h·ªèi tr·∫Øc nghi·ªám</p>
                      <div class="drill-stats">
                        <span class="accuracy" id="drillAccMc">--</span>
                        <span class="total">c√¢u ƒë√£ l√†m</span>
                      </div>
                    </div>
                    <div class="difficulty-indicator">
                      <span class="dot easy"></span>
                      <span class="label">D·ªÖ</span>
                    </div>
                  </button>

                  <button
                    class="drill-type-card"
                    onclick="Drill.start('summary')"
                  >
                    <div class="drill-icon"><i class="ph ph-clipboard-text"></i></div>
                    <div class="drill-info">
                      <h4>Summary Completion</h4>
                      <p>Ho√†n th√†nh t√≥m t·∫Øt</p>
                      <div class="drill-stats">
                        <span class="accuracy" id="drillAccSummary">--</span>
                        <span class="total">c√¢u ƒë√£ l√†m</span>
                      </div>
                    </div>
                    <div class="difficulty-indicator">
                      <span class="dot medium"></span>
                      <span class="label">Trung b√¨nh</span>
                    </div>
                  </button>

                  <button
                    class="drill-type-card"
                    onclick="Drill.start('sentence')"
                  >
                    <div class="drill-icon"><i class="ph ph-pencil-simple"></i></div>
                    <div class="drill-info">
                      <h4>Sentence Completion</h4>
                      <p>Ho√†n th√†nh c√¢u</p>
                      <div class="drill-stats">
                        <span class="accuracy" id="drillAccSentence">--</span>
                        <span class="total">c√¢u ƒë√£ l√†m</span>
                      </div>
                    </div>
                    <div class="difficulty-indicator">
                      <span class="dot medium"></span>
                      <span class="label">Trung b√¨nh</span>
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </section>

          <!-- Vocabulary Tab -->
          <section id="vocabulary" class="tab-content">
            <div class="section-header">
              <h2><i class="ph ph-book-open"></i> Kho t·ª´ v·ª±ng</h2>
              <p class="section-subtitle">Qu·∫£n l√Ω v√† √¥n t·∫≠p t·ª´ v·ª±ng IELTS</p>
            </div>

            <!-- Learning Modes -->
            <div class="card">
              <div class="card-header">
                <h3>üéØ Ch·∫ø ƒë·ªô h·ªçc</h3>
              </div>
              <div class="vocab-quick-actions">
                <button class="vocab-mode-btn" onclick="Flashcard.start('all')">
                  üé¥ Flashcard - T·∫•t c·∫£ t·ª´
                </button>
                <button class="vocab-mode-btn" onclick="Flashcard.start('new')">
                  ‚ú® Flashcard - T·ª´ m·ªõi
                </button>
                <button
                  class="vocab-mode-btn"
                  onclick="Flashcard.start('weak')"
                >
                  üí™ Flashcard - T·ª´ y·∫øu
                </button>
                <button
                  class="vocab-mode-btn"
                  onclick="VocabQuiz.start('multiple-choice', 10)"
                >
                  üìù Quiz - Tr·∫Øc nghi·ªám (10 c√¢u)
                </button>
                <button
                  class="vocab-mode-btn"
                  onclick="VocabQuiz.start('typing', 10)"
                >
                  ‚úçÔ∏è Quiz - T·ª± lu·∫≠n (10 c√¢u)
                </button>
                <button
                  class="vocab-mode-btn"
                  onclick="VocabQuiz.start('mixed', 15)"
                >
                  üé≤ Quiz - H·ªón h·ª£p (15 c√¢u)
                </button>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>‚ûï Th√™m t·ª´ m·ªõi</h3>
              </div>
              <div class="vocab-add-form">
                <input
                  type="text"
                  id="newWord"
                  class="input"
                  placeholder="T·ª´ v·ª±ng..."
                  required
                />
                <input
                  type="text"
                  id="newMeaning"
                  class="input"
                  placeholder="Nghƒ©a..."
                  required
                />
                <input
                  type="text"
                  id="newExample"
                  class="input"
                  placeholder="V√≠ d·ª• (t√πy ch·ªçn)..."
                />
                <select id="newTopic" class="select">
                  <option value="general">üìù T·ªïng qu√°t</option>
                  <option value="education">üéì Gi√°o d·ª•c</option>
                  <option value="environment">üå± M√¥i tr∆∞·ªùng</option>
                  <option value="technology">üíª C√¥ng ngh·ªá</option>
                  <option value="health">üè• S·ª©c kh·ªèe</option>
                  <option value="business">üíº Kinh doanh</option>
                  <option value="culture">üé≠ VƒÉn h√≥a</option>
                  <option value="science">üî¨ Khoa h·ªçc</option>
                  <option value="society">üë• X√£ h·ªôi</option>
                  <option value="travel">‚úàÔ∏è Du l·ªãch</option>
                  <option value="sport">‚öΩ Th·ªÉ thao</option>
                  <option value="art">üé® Ngh·ªá thu·∫≠t</option>
                  <option value="media">üì∫ Truy·ªÅn th√¥ng</option>
                </select>
                <button class="btn btn-primary" id="addVocabBtn">
                  ‚ûï Th√™m
                </button>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>üîç T√¨m ki·∫øm & L·ªçc</h3>
              </div>
              <div class="vocab-search-bar">
                <input
                  type="text"
                  id="searchVocab"
                  class="input"
                  placeholder="üîç T√¨m ki·∫øm t·ª´ v·ª±ng..."
                />
                <select id="topicFilter" class="select">
                  <option value="all">üìö T·∫•t c·∫£ ch·ªß ƒë·ªÅ</option>
                  <option value="general">üìù T·ªïng qu√°t</option>
                  <option value="education">üéì Gi√°o d·ª•c</option>
                  <option value="environment">üå± M√¥i tr∆∞·ªùng</option>
                  <option value="technology">üíª C√¥ng ngh·ªá</option>
                  <option value="health">üè• S·ª©c kh·ªèe</option>
                  <option value="business">üíº Kinh doanh</option>
                  <option value="culture">üé≠ VƒÉn h√≥a</option>
                  <option value="science">üî¨ Khoa h·ªçc</option>
                  <option value="society">üë• X√£ h·ªôi</option>
                  <option value="travel">‚úàÔ∏è Du l·ªãch</option>
                  <option value="sport">‚öΩ Th·ªÉ thao</option>
                  <option value="art">üé® Ngh·ªá thu·∫≠t</option>
                  <option value="media">üì∫ Truy·ªÅn th√¥ng</option>
                </select>
                <select id="sortVocab" class="select">
                  <option value="newest">M·ªõi nh·∫•t</option>
                  <option value="oldest">C≈© nh·∫•t</option>
                  <option value="alphabetical">A-Z</option>
                </select>
              </div>
              <div class="vocab-display-options">
                <label class="checkbox-label">
                  <input type="checkbox" id="groupByTopic" />
                  <span>üìÇ Nh√≥m theo ch·ªß ƒë·ªÅ</span>
                </label>
              </div>
            </div>

            <!-- Topic Statistics -->
            <div class="card">
              <div class="card-header">
                <h3>üìä Th·ªëng k√™ theo ch·ªß ƒë·ªÅ</h3>
              </div>
              <div class="topic-stats-container" id="topicStatsContainer">
                <p class="empty-state">Ch∆∞a c√≥ th·ªëng k√™</p>
              </div>
            </div>

            <div class="vocab-list-container">
              <div class="vocab-list" id="vocabList">
                <p class="empty-state">Ch∆∞a c√≥ t·ª´ v·ª±ng n√†o. H√£y th√™m t·ª´ m·ªõi!</p>
              </div>
            </div>
          </section>

          <!-- Errors Tab -->
          <section id="errors" class="tab-content">
            <div class="section-header">
              <h2>‚ùå Nh·∫≠t k√Ω l·ªói sai</h2>
              <p class="section-subtitle">Ph√¢n t√≠ch v√† h·ªçc t·ª´ c√°c l·ªói sai</p>
            </div>

            <div class="card">
              <div class="card-header">
                <h3>üìä Th·ªëng k√™ l·ªói</h3>
                <button class="btn btn-sm btn-danger" id="clearErrors">
                  üóëÔ∏è X√≥a t·∫•t c·∫£
                </button>
              </div>
              <div class="error-stats-grid">
                <div class="error-stat-box">
                  <span class="error-stat-value" id="totalErrors">0</span>
                  <span class="error-stat-label">T·ªïng l·ªói</span>
                </div>
                <div class="error-stat-box">
                  <span class="error-stat-value" id="mostCommonError">-</span>
                  <span class="error-stat-label">L·ªói th∆∞·ªùng g·∫∑p nh·∫•t</span>
                </div>
                <div class="error-stat-box">
                  <span class="error-stat-value" id="errorRate">-</span>
                  <span class="error-stat-label">T·ª∑ l·ªá l·ªói</span>
                </div>
              </div>
            </div>

            <div class="error-log" id="errorLog">
              <p class="empty-state">Ch∆∞a c√≥ l·ªói n√†o ƒë∆∞·ª£c ghi nh·∫≠n</p>
            </div>
          </section>

          <!-- AI Analysis Tab -->
          <section id="aianalysis" class="tab-content">
            <div class="section-header">
              <h2>ü§ñ AI Ph√¢n t√≠ch</h2>
              <p class="section-subtitle">
                Ph√¢n t√≠ch th√¥ng minh d·ª±a tr√™n l·ªãch s·ª≠ h·ªçc t·∫≠p c·ªßa b·∫°n
              </p>
            </div>

            <div class="ai-analysis-container">
              <div class="card ai-main-card">
                <div class="card-header">
                  <h3>‚ú® B√°o c√°o ph√¢n t√≠ch AI</h3>
                  <button
                    class="btn btn-primary"
                    onclick="AIAnalysis.generate()"
                    id="generateAIBtn"
                  >
                    üîÆ T·∫°o ph√¢n t√≠ch m·ªõi
                  </button>
                </div>
                <div class="ai-analysis-content" id="aiAnalysisContent">
                  <div class="ai-placeholder">
                    <div class="ai-icon">ü§ñ</div>
                    <h3>AI s·∫µn s√†ng ph√¢n t√≠ch</h3>
                    <p>
                      Nh·∫•n "T·∫°o ph√¢n t√≠ch m·ªõi" ƒë·ªÉ AI ƒë√°nh gi√° nƒÉng l·ª±c v√† ƒë·ªÅ
                      xu·∫•t l·ªô tr√¨nh c·∫£i thi·ªán band score.
                    </p>
                    <ul class="ai-features">
                      <li>üéØ Ph√¢n t√≠ch ƒëi·ªÉm m·∫°nh/y·∫øu</li>
                      <li>üìä ƒê√°nh gi√° t·ª´ng d·∫°ng c√¢u h·ªèi</li>
                      <li>üìà ƒê·ªÅ xu·∫•t l·ªô tr√¨nh c·∫£i thi·ªán</li>
                      <li>üí° M·∫πo l√†m b√†i hi·ªáu qu·∫£</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h3>üìä Th·ªëng k√™ theo d·∫°ng b√†i</h3>
                </div>
                <div class="question-type-stats" id="questionTypeStats">
                  <!-- Populated dynamically -->
                </div>
              </div>
            </div>
          </section>

          <!-- Upload Tab -->
          <section id="upload" class="tab-content">
            <div class="section-header">
              <h2>üì§ T·∫°o ƒë·ªÅ thi m·ªõi</h2>
              <p class="section-subtitle">
                Upload file ho·∫∑c nh·∫≠p tr·ª±c ti·∫øp ƒë·ªÉ t·∫°o ƒë·ªÅ
              </p>
            </div>

            <!-- Tab Switch for Upload Methods -->
            <div class="upload-method-tabs">
              <button class="method-tab active" data-method="manual">
                ‚úçÔ∏è Nh·∫≠p tr·ª±c ti·∫øp
              </button>
              <button class="method-tab" data-method="upload">
                üìÑ Upload file
              </button>
              <button class="method-tab" data-method="ai-generator">
                ü§ñ AI T·∫°o ƒë·ªÅ
              </button>
            </div>

            <!-- Manual Entry Method -->
            <div id="manualEntrySection" class="upload-method-content active">
              <div class="card">
                <div class="card-header">
                  <h3>üìù Th√¥ng tin ƒë·ªÅ thi</h3>
                </div>
                <div class="manual-form">
                  <div class="form-row">
                    <div class="form-group">
                      <label>T√™n ƒë·ªÅ thi <span class="required">*</span></label>
                      <input
                        type="text"
                        id="manualTestTitle"
                        class="input"
                        placeholder="VD: Cambridge 18 - Test 1"
                      />
                    </div>
                    <div class="form-group">
                      <label>Ngu·ªìn ƒë·ªÅ</label>
                      <select id="manualTestSource" class="select">
                        <option value="custom">T·ª± t·∫°o</option>
                        <option value="cambridge">Cambridge</option>
                        <option value="british-council">British Council</option>
                        <option value="ielts-official">IELTS Official</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>Band Level</label>
                      <select id="manualTestLevel" class="select">
                        <option value="5.0">Band 5.0</option>
                        <option value="6.0">Band 6.0</option>
                        <option value="6.5">Band 6.5</option>
                        <option value="7.0" selected>Band 7.0</option>
                        <option value="7.5">Band 7.5</option>
                        <option value="8.0">Band 8.0</option>
                        <option value="8.5">Band 8.5</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Passage Entry -->
              <div class="card passage-entry-card">
                <div class="card-header">
                  <h3>üìñ Passage</h3>
                  <div class="passage-tabs" id="passageTabs">
                    <button class="passage-tab active" data-passage="1">
                      Passage 1
                    </button>
                    <button class="passage-tab" data-passage="2">
                      Passage 2
                    </button>
                    <button class="passage-tab" data-passage="3">
                      Passage 3
                    </button>
                  </div>
                </div>

                <div class="passage-input-container">
                  <div class="form-group">
                    <label
                      >Ti√™u ƒë·ªÅ Passage <span class="required">*</span></label
                    >
                    <input
                      type="text"
                      id="passageTitle"
                      class="input"
                      placeholder="VD: The History of Coffee"
                    />
                  </div>
                  <div class="form-group">
                    <label
                      >N·ªôi dung Passage <span class="required">*</span></label
                    >
                    <textarea
                      id="passageText"
                      class="textarea passage-textarea"
                      placeholder="D√°n n·ªôi dung passage v√†o ƒë√¢y... 

Tip: B·∫°n c√≥ th·ªÉ copy/paste tr·ª±c ti·∫øp t·ª´ PDF ho·∫∑c website."
                    ></textarea>
                    <div class="textarea-stats">
                      <span id="passageWordCount">0 t·ª´</span>
                      <span id="passageCharCount">0 k√Ω t·ª±</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Questions Entry -->
              <div class="card questions-entry-card">
                <div class="card-header">
                  <h3>‚ùì C√¢u h·ªèi</h3>
                  <button class="btn btn-sm btn-success" id="addQuestionBtn">
                    ‚ûï Th√™m c√¢u h·ªèi
                  </button>
                </div>

                <div
                  class="questions-input-container"
                  id="questionsInputContainer"
                >
                  <!-- Question template will be added here -->
                  <div class="question-entry" data-question-id="1">
                    <div class="question-header">
                      <span class="question-number">C√¢u 1</span>
                      <select class="select question-type-select">
                        <option value="tfng">True/False/Not Given</option>
                        <option value="ynng">Yes/No/Not Given</option>
                        <option value="multiple-choice">Multiple Choice</option>
                        <option value="matching-headings">
                          Matching Headings
                        </option>
                        <option value="summary">Summary Completion</option>
                        <option value="sentence">Sentence Completion</option>
                      </select>
                      <button class="btn btn-sm btn-danger remove-question-btn">
                        üóëÔ∏è
                      </button>
                    </div>
                    <div class="question-body">
                      <input
                        type="text"
                        class="input question-text-input"
                        placeholder="N·ªôi dung c√¢u h·ªèi..."
                      />
                      <div class="answer-row">
                        <input
                          type="text"
                          class="input answer-input"
                          placeholder="ƒê√°p √°n ƒë√∫ng"
                        />
                        <input
                          type="text"
                          class="input explanation-input"
                          placeholder="Gi·∫£i th√≠ch (t√πy ch·ªçn)"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <button
                  class="btn btn-primary btn-large save-test-btn"
                  onclick="ManualEntry.saveTest()"
                >
                  üíæ L∆∞u ƒë·ªÅ thi
                </button>
              </div>
            </div>

            <!-- File Upload Method -->
            <div id="fileUploadSection" class="upload-method-content">
              <div class="card">
                <div class="card-header">
                  <h3>üìÑ Upload file ƒë·ªÅ thi</h3>
                  <button
                    class="btn btn-sm btn-primary"
                    onclick="App.showExampleFormat()"
                  >
                    üìù Xem m·∫´u file
                  </button>
                </div>
                <p class="hint-text">
                  Upload file JSON ho·∫∑c TXT ƒë·ªÉ t·ª± ƒë·ªông t·∫°o ƒë·ªÅ thi
                </p>

                <div class="upload-area" id="uploadArea">
                  <div class="upload-icon">üìÅ</div>
                  <p class="upload-text">K√©o th·∫£ file ho·∫∑c click ƒë·ªÉ ch·ªçn</p>
                  <p class="upload-subtext">H·ªó tr·ª£: JSON, TXT (Max 10MB)</p>
                  <input
                    type="file"
                    id="fileInput"
                    class="file-input"
                    accept=".json,.txt"
                    multiple
                  />
                </div>
              </div>

              <!-- My Tests Library -->
              <div class="card">
                <div class="card-header">
                  <h3>üìö ƒê·ªÅ thi ƒë√£ t·∫°o</h3>
                  <button
                    class="btn btn-sm btn-danger"
                    onclick="App.clearAllTests()"
                    id="clearAllTestsBtn"
                  >
                    üóëÔ∏è X√≥a t·∫•t c·∫£
                  </button>
                </div>
                <div id="testLibrary" class="test-library">
                  <p class="empty-state">Ch∆∞a c√≥ ƒë·ªÅ thi n√†o</p>
                </div>
              </div>
            </div>

            <!-- AI Generator Method -->
            <div id="aiGeneratorSection" class="upload-method-content">
              <div class="ai-generator-intro card">
                <div class="ai-intro-header">
                  <div class="ai-robot">ü§ñ</div>
                  <div class="ai-intro-text">
                    <h3>AI T·∫°o ƒë·ªÅ thi IELTS</h3>
                    <p>
                      S·ª≠ d·ª•ng tr√≠ tu·ªá nh√¢n t·∫°o ƒë·ªÉ t·ª± ƒë·ªông t·∫°o ƒë·ªÅ thi t·ª´ ch·ªß ƒë·ªÅ
                      ho·∫∑c ƒëo·∫°n vƒÉn c√≥ s·∫µn
                    </p>
                  </div>
                </div>
              </div>

              <!-- Generate from Topic -->
              <div class="card">
                <div class="card-header">
                  <h3>üí° T·∫°o ƒë·ªÅ t·ª´ ch·ªß ƒë·ªÅ</h3>
                </div>
                <p class="hint-text">
                  Nh·∫≠p ch·ªß ƒë·ªÅ b·∫•t k·ª≥, AI s·∫Ω t·ª± ƒë·ªông t·∫°o b√†i ƒë·ªçc v√† c√¢u h·ªèi IELTS
                </p>

                <div class="ai-form">
                  <div class="form-group">
                    <label
                      >Ch·ªß ƒë·ªÅ / Topic <span class="required">*</span></label
                    >
                    <input
                      type="text"
                      id="aiTopicPrompt"
                      class="input"
                      placeholder="VD: Climate change, Space exploration, Ancient civilizations..."
                    />
                    <div class="topic-suggestions">
                      <span class="suggestion-label">G·ª£i √Ω:</span>
                      <button
                        type="button"
                        class="topic-chip"
                        onclick="
                          document.getElementById('aiTopicPrompt').value =
                            'The impact of social media on modern society'
                        "
                      >
                        Social Media
                      </button>
                      <button
                        type="button"
                        class="topic-chip"
                        onclick="
                          document.getElementById('aiTopicPrompt').value =
                            'Renewable energy and sustainable development'
                        "
                      >
                        Renewable Energy
                      </button>
                      <button
                        type="button"
                        class="topic-chip"
                        onclick="
                          document.getElementById('aiTopicPrompt').value =
                            'The benefits of bilingual education'
                        "
                      >
                        Education
                      </button>
                      <button
                        type="button"
                        class="topic-chip"
                        onclick="
                          document.getElementById('aiTopicPrompt').value =
                            'Urban planning and smart cities'
                        "
                      >
                        Urban Planning
                      </button>
                      <button
                        type="button"
                        class="topic-chip"
                        onclick="
                          document.getElementById('aiTopicPrompt').value =
                            'The psychology of consumer behavior'
                        "
                      >
                        Psychology
                      </button>
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label>Band Level</label>
                      <select id="aiBandLevel" class="select">
                        <option value="5.5">Band 5.5 - Intermediate</option>
                        <option value="6.0">Band 6.0</option>
                        <option value="6.5" selected>Band 6.5</option>
                        <option value="7.0">Band 7.0</option>
                        <option value="7.5">Band 7.5 - Advanced</option>
                        <option value="8.0">Band 8.0 - Expert</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>S·ªë c√¢u h·ªèi</label>
                      <select id="aiQuestionCount" class="select">
                        <option value="5">5 c√¢u</option>
                        <option value="8">8 c√¢u</option>
                        <option value="10" selected>10 c√¢u</option>
                        <option value="13">13 c√¢u (1 passage)</option>
                        <option value="15">15 c√¢u</option>
                      </select>
                    </div>
                  </div>

                  <button
                    class="btn btn-primary btn-large"
                    id="generateFromPromptBtn"
                  >
                    ‚ú® T·∫°o ƒë·ªÅ t·ª´ ch·ªß ƒë·ªÅ
                  </button>
                </div>
              </div>

              <!-- Generate from Text -->
              <div class="card">
                <div class="card-header">
                  <h3>üìù T·∫°o c√¢u h·ªèi t·ª´ ƒëo·∫°n vƒÉn</h3>
                </div>
                <p class="hint-text">
                  C√≥ s·∫µn ƒëo·∫°n vƒÉn? Paste v√†o ƒë√¢y, AI s·∫Ω t·ª± ƒë·ªông t·∫°o c√¢u h·ªèi
                  IELTS
                </p>

                <div class="ai-form">
                  <div class="form-group">
                    <label>ƒêo·∫°n vƒÉn b·∫£n <span class="required">*</span></label>
                    <textarea
                      id="aiPassageText"
                      class="textarea passage-textarea"
                      placeholder="D√°n ƒëo·∫°n vƒÉn b·∫£n v√†o ƒë√¢y (√≠t nh·∫•t 100 k√Ω t·ª±)...

VD: Copy t·ª´ s√°ch, b√°o, website v·ªÅ ch·ªß ƒë·ªÅ academic nh∆∞ khoa h·ªçc, l·ªãch s·ª≠, x√£ h·ªôi..."
                    ></textarea>
                    <div class="textarea-stats">
                      <span id="aiPassageWordCount">0 t·ª´</span>
                      <span id="aiPassageCharCount">0 k√Ω t·ª±</span>
                    </div>
                  </div>

                  <div class="form-group">
                    <label>D·∫°ng c√¢u h·ªèi c·∫ßn t·∫°o</label>
                    <div class="question-type-checkboxes">
                      <label class="checkbox-label">
                        <input
                          type="checkbox"
                          name="aiQuestionType"
                          value="tfng"
                          checked
                        />
                        <span>True/False/Not Given</span>
                      </label>
                      <label class="checkbox-label">
                        <input
                          type="checkbox"
                          name="aiQuestionType"
                          value="multiple-choice"
                          checked
                        />
                        <span>Multiple Choice</span>
                      </label>
                      <label class="checkbox-label">
                        <input
                          type="checkbox"
                          name="aiQuestionType"
                          value="summary"
                          checked
                        />
                        <span>Summary Completion</span>
                      </label>
                      <label class="checkbox-label">
                        <input
                          type="checkbox"
                          name="aiQuestionType"
                          value="ynng"
                        />
                        <span>Yes/No/Not Given</span>
                      </label>
                      <label class="checkbox-label">
                        <input
                          type="checkbox"
                          name="aiQuestionType"
                          value="sentence"
                        />
                        <span>Sentence Completion</span>
                      </label>
                      <label class="checkbox-label">
                        <input
                          type="checkbox"
                          name="aiQuestionType"
                          value="matching-headings"
                        />
                        <span>Matching Headings</span>
                      </label>
                    </div>
                  </div>

                  <button
                    class="btn btn-success btn-large"
                    id="generateFromTextBtn"
                  >
                    üîÆ T·∫°o c√¢u h·ªèi t·ª´ vƒÉn b·∫£n
                  </button>
                </div>
              </div>

              <!-- Result Area -->
              <div
                id="aiGeneratorResult"
                class="ai-generator-result"
                style="display: none"
              >
                <!-- Results will be shown here -->
              </div>

              <!-- API Key Notice -->
              <div class="card ai-notice-card">
                <div class="ai-notice">
                  <span class="notice-icon">üí°</span>
                  <div class="notice-content">
                    <strong>ƒê·ªÉ s·ª≠ d·ª•ng AI Generator:</strong>
                    <p>
                      C·∫•u h√¨nh OpenAI API key trong
                      <a
                        href="#"
                        onclick="
                          App.switchTab('settings');
                          return false;
                        "
                        >Settings</a
                      >
                      ƒë·ªÉ c√≥ tr·∫£i nghi·ªám t·ªët nh·∫•t. Kh√¥ng c√≥ API key s·∫Ω s·ª≠ d·ª•ng
                      ch·∫ø ƒë·ªô demo.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Backup Section -->
            <div class="card">
              <div class="card-header">
                <h3>üíæ Sao l∆∞u d·ªØ li·ªáu</h3>
              </div>
              <p class="hint-text">
                D·ªØ li·ªáu ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u. Xu·∫•t file backup ƒë·ªÉ ƒë·∫£m b·∫£o an to√†n.
              </p>
              <div class="backup-actions">
                <button class="btn btn-primary" id="exportDataBtn">
                  üì• Xu·∫•t d·ªØ li·ªáu
                </button>
                <button class="btn btn-success" id="importDataBtn">
                  üì§ Nh·∫≠p d·ªØ li·ªáu
                </button>
                <input
                  type="file"
                  id="importFile"
                  style="display: none"
                  accept=".json"
                />
              </div>
              <p class="backup-info">
                L·∫ßn sao l∆∞u cu·ªëi: <strong id="lastBackup">Ch∆∞a c√≥</strong>
              </p>
            </div>
          </section>

          <!-- Settings Tab -->
          <section id="settings" class="tab-content">
            <div class="section-header">
              <h2>‚öôÔ∏è C√†i ƒë·∫∑t</h2>
              <p class="section-subtitle">
                T√πy ch·ªânh ·ª©ng d·ª•ng theo s·ªü th√≠ch c·ªßa b·∫°n
              </p>
            </div>

            <div class="settings-container">
              <div class="card">
                <div class="card-header">
                  <h3>üéØ M·ª•c ti√™u h·ªçc t·∫≠p</h3>
                </div>
                <div class="settings-group">
                  <div class="setting-item">
                    <label>Band hi·ªán t·∫°i</label>
                    <select id="currentBandSetting" class="select">
                      <option value="4.0">Band 4.0</option>
                      <option value="4.5">Band 4.5</option>
                      <option value="5.0">Band 5.0</option>
                      <option value="5.5">Band 5.5</option>
                      <option value="6.0">Band 6.0</option>
                      <option value="6.5" selected>Band 6.5</option>
                      <option value="7.0">Band 7.0</option>
                      <option value="7.5">Band 7.5</option>
                    </select>
                  </div>
                  <div class="setting-item">
                    <label>M·ª•c ti√™u Band</label>
                    <select id="targetBandSetting" class="select">
                      <option value="6.0">Band 6.0</option>
                      <option value="6.5">Band 6.5</option>
                      <option value="7.0">Band 7.0</option>
                      <option value="7.5">Band 7.5</option>
                      <option value="8.0" selected>Band 8.0</option>
                      <option value="8.5">Band 8.5</option>
                      <option value="9.0">Band 9.0</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="card ai-settings-card">
                <div class="card-header">
                  <h3>ü§ñ C√†i ƒë·∫∑t AI Provider</h3>
                </div>
                <p class="hint-text">
                  Ch·ªçn AI provider ƒë·ªÉ t·∫°o ƒë·ªÅ thi t·ª± ƒë·ªông. H·ªó tr·ª£ nhi·ªÅu d·ªãch v·ª•
                  kh√°c nhau.
                </p>

                <div class="settings-group">
                  <div class="setting-item">
                    <label>üåê AI Provider</label>
                    <select
                      id="aiProviderSelect"
                      class="select"
                      onchange="AIProvider.onProviderChange(this.value)"
                    >
                      <option value="openai">üü¢ OpenAI (ChatGPT)</option>
                      <option value="google">üîµ Google Gemini</option>
                      <option value="anthropic">üü† Anthropic Claude</option>
                      <option value="groq">‚ö° Groq (Free & Fast)</option>
                      <option value="openrouter">
                        üåê OpenRouter (Multi-Model)
                      </option>
                      <option value="custom">üîß Custom API</option>
                    </select>
                  </div>

                  <div class="setting-item">
                    <label>üì¶ Model</label>
                    <select
                      id="aiModelSelect"
                      class="select"
                      onchange="AIProvider.onModelChange(this.value)"
                    >
                      <!-- Models loaded dynamically -->
                    </select>
                  </div>

                  <div class="setting-item">
                    <label>üîë API Key</label>
                    <div class="api-key-input-wrapper">
                      <input
                        type="password"
                        id="aiApiKeyInput"
                        class="input"
                        placeholder="Nh·∫≠p API key..."
                        onchange="AIProvider.onApiKeyChange(this.value)"
                      />
                      <button
                        type="button"
                        class="btn btn-sm btn-ghost toggle-visibility"
                        onclick="AIProvider.toggleKeyVisibility()"
                      >
                        üëÅÔ∏è
                      </button>
                    </div>
                    <small id="aiKeyDocsLink">
                      <a
                        href="https://platform.openai.com/api-keys"
                        target="_blank"
                        rel="noopener"
                      >
                        üìÑ L·∫•y API key t·∫°i ƒë√¢y
                      </a>
                    </small>
                  </div>

                  <div
                    id="customEndpointSection"
                    class="setting-item"
                    style="display: none"
                  >
                    <label>üîó Custom Endpoint</label>
                    <input
                      type="text"
                      id="aiCustomEndpoint"
                      class="input"
                      placeholder="https://your-api.com/v1/chat/completions"
                      onchange="Storage.set('ai_custom_endpoint', this.value)"
                    />
                  </div>

                  <div id="aiConnectionStatus" class="connection-status">
                    <span class="status-dot"></span> Ch∆∞a c·∫•u h√¨nh
                  </div>

                  <div class="setting-actions">
                    <button
                      class="btn btn-primary btn-sm"
                      onclick="AIProvider.testAndSave()"
                    >
                      üîå Test k·∫øt n·ªëi
                    </button>
                    <button
                      class="btn btn-ghost btn-sm"
                      onclick="AIProvider.clearSettings()"
                    >
                      üóëÔ∏è X√≥a c√†i ƒë·∫∑t
                    </button>
                  </div>
                </div>

                <div class="provider-info-cards">
                  <div class="provider-info" data-provider="openai">
                    <strong>üü¢ OpenAI</strong>
                    <p>GPT-4o, GPT-4 Turbo - Ch·∫•t l∆∞·ª£ng cao, ph√≠ theo usage</p>
                  </div>
                  <div class="provider-info" data-provider="google">
                    <strong>üîµ Google Gemini</strong>
                    <p>Gemini 1.5 Pro/Flash - C√≥ free tier h√†o ph√≥ng</p>
                  </div>
                  <div class="provider-info" data-provider="anthropic">
                    <strong>üü† Claude</strong>
                    <p>Claude 3.5 Sonnet - Tr·∫£ l·ªùi ch√≠nh x√°c, an to√†n</p>
                  </div>
                  <div class="provider-info" data-provider="groq">
                    <strong>‚ö° Groq</strong>
                    <p>Llama 3.3, Mixtral - MI·ªÑN PH√ç, si√™u nhanh!</p>
                  </div>
                  <div class="provider-info" data-provider="openrouter">
                    <strong>üåê OpenRouter</strong>
                    <p>Truy c·∫≠p nhi·ªÅu model qua 1 API key</p>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h3>üîî Th√¥ng b√°o & Giao di·ªán</h3>
                </div>
                <div class="settings-group">
                  <div class="setting-item toggle">
                    <label>√Çm thanh th√¥ng b√°o</label>
                    <label class="switch">
                      <input type="checkbox" id="soundSetting" checked />
                      <span class="slider"></span>
                    </label>
                  </div>
                  <div class="setting-item toggle">
                    <label>Ch·∫ø ƒë·ªô t·ªëi</label>
                    <label class="switch">
                      <input type="checkbox" id="darkModeSetting" />
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>

              <button
                class="btn btn-primary btn-large"
                onclick="Settings.save()"
              >
                üíæ L∆∞u c√†i ƒë·∫∑t
              </button>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Fullscreen Practice Mode Overlay -->
    <div id="fullscreenMode" class="fullscreen-mode" style="display: none">
      <div class="fullscreen-header">
        <div class="fs-left">
          <button
            class="btn btn-danger btn-sm"
            onclick="Practice.exitFullscreen()"
          >
            ‚úï Tho√°t
          </button>
          <span class="fs-test-title" id="fsTestTitle">-</span>
        </div>
        <div class="fs-center">
          <div class="fs-timer" id="fsTimer">60:00</div>
        </div>
        <div class="fs-right">
          <span class="fs-progress" id="fsProgress">0/40</span>
          <button class="btn btn-primary" id="fsSubmitBtn">üì§ N·ªôp b√†i</button>
        </div>
      </div>

      <div class="fullscreen-content">
        <div class="fs-passage-panel" id="fsPassagePanel">
          <div class="fs-passage-header">
            <h2 id="fsPassageTitle">Passage 1</h2>
            <div class="fs-highlight-controls">
              <button class="highlight-btn active" data-color="yellow">
                üü®
              </button>
              <button class="highlight-btn" data-color="green">üü©</button>
              <button class="highlight-btn" data-color="blue">üü¶</button>
              <button class="highlight-btn" data-color="pink">üü™</button>
              <button class="btn btn-sm" id="fsClearHighlights">üóëÔ∏è</button>
            </div>
          </div>
          <div class="fs-passage-content" id="fsPassageContent">
            <!-- Passage content here -->
          </div>
        </div>

        <div class="fs-questions-panel" id="fsQuestionsPanel">
          <div class="fs-questions-header">
            <h3>Questions</h3>
            <div class="fs-question-nav" id="fsQuestionNav">
              <!-- Question navigation buttons -->
            </div>
          </div>
          <div class="fs-questions-content" id="fsQuestionsContent">
            <!-- Questions here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- JavaScript Files -->
    <!-- Main Application Module -->
    <script type="module" src="js/main.js"></script>
  </body>
</html>
